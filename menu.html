<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/styles/menu.css">
    <link rel="stylesheet" href="/styles/template.css">
</head>

<body id="page_menu__body">
    

    <div id="page_menu__main">
        <header id="page_menu__header">
            <img src="/images/maarlogo.svg" width="220px">
            <img src="/images/close_button.png" id="close_menu_button" class="button" />
        </header>


        <footer id="page_menu__footer">
            <div link="/index.html" class="menu_item">
                <span>(1)</span>
                <span class="menu_item_text">HOME</span>
            </div>
            <div link="/work.html" class="menu_item">
                <span>(2)</span>
                <span class="menu_item_text">WORK</span>
            </div>
            <div link="/about.html" class="menu_item">
                <span>(3)</span>
                <span class="menu_item_text">ABOUT</span>
            </div>
            <div link="/aiapproach.html" class="menu_item">
                <span>(4)</span>
                <span class="menu_item_text">AI APPROACH</span>
            </div>
        </footer>
    </div>


    <script>
        function menuItems(parentPage) {
            const links = document.querySelectorAll(".menu_item");
    
            links.forEach(link => {
                link.addEventListener("click", async (event) => {
                    event.preventDefault();
                    const targetPage = link.getAttribute("link");
    
                    try {
                        const response = await fetch(targetPage);
                        const htmlString = await response.text();
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(htmlString, "text/html");
    
                        // Obtém o head da parentPage
                        const parentHead = parentPage.querySelector("head");
    
                        // Substitui o head da parentPage pelo head da targetPage
                        parentHead.innerHTML = doc.head.innerHTML;
    
                        // Obtém o body da parentPage
                        const parentBody = parentPage.querySelector("body");
    
                        // Limpa o body da parentPage sem excluir o elemento menu_overlay
                        Array.from(parentBody.children).forEach(child => {
                            if (child.id != 'menu_overlay') {
                                parentBody.removeChild(child);
                            }
                        });
    
                        // Acrescenta o body da targetPage no body da parentPage
                        parentBody.innerHTML += doc.body.innerHTML;
    
                        // Esconde o menu com transição
                        const menuOverlay = parentPage.ownerDocument.getElementById("menu_overlay");
                        if (menuOverlay) {
                            menuOverlay.offsetHeight;
                            menuOverlay.style.top = "-100vh";
                        }
    
                        // Dispara evento para scripts que dependem de DOMContentLoaded
                        const event = new Event('DOMContentLoaded', {
                            bubbles: true,
                            cancelable: true
                        });
                        document.dispatchEvent(event);
    
                        // Atualiza o histórico
                        history.pushState({}, '', targetPage);
    
                    } catch (error) {
                        console.error('Erro ao carregar a página:', error);
                    }
                });
            });
        }
    </script>

    
</body>

</html>